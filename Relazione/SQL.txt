
NB: provo a fare dei trigger , non so se vanno bene cmq ....
 
- i dbms ignorano il CHECK .... quindi anche se lo metto non fanno controlli in teoria ..... dioooooo trigger allora

ERRORE GRAVE : ORA COME ORA IL CODICEMATERIALE NON FA IL SUO LAVORO , FORSE SI AGGIUSTA CON UNA PROCEDURA

TESSERA
 NoleggioInCorso : x velocizzare

UTENTE
Le specializzazioni di Utente (Studente, Turista) vengono implementate nell'entità utilizzando tre attributi aventi la seguente logica:
L'attributo Tipo identifica la tipologia di utente (base, studente, turista) tramite un CHAR(1).
Nel caso specifico dello studente vengono utilizzati due attributi CHAR(10) per la matricola dell'Università di Padova e per la carta IoStudio.
Poichè questi due attributi sono esclusivi tra loro anzichè utilizzare due campi CHAR(10) di cui uno dei due rimarrebbe sempre vuoto, si utilizza un attributo univoco CodiceStudente e un attributo BOOLEANo IoStudio per identificare se CodiceStudente appartiene ad una carta IoStudio (TRUE) o ad una matricola universitaria (FALSE).
CONSTRAINT check_Studente CHECK (Tipo='Studente' AND CodiceStudente IS NOT NULL AND IoStudio IS NOT NULL)

MATERIALE
 Tipo ENUM('Bicicletta','Colonnina') NOT NULL/*x velocizzare alcune query, forse

BICICLETTA
Le specializzazioni di Bicicletta possono venire rappresentate con un singolo attributo (Stato)
trigger insert check Materiale.Tipo=='Bicicletta'

COLONNINA
L'attributo Stato della Colonnina è rappresentabile con un BOOLEANo di nome Danneggiata; inoltre per identificare una colonnina occupata si usa la chiave esterna a Bicicletta ottenuta dalla relazione Posizione.

OPERAZIONE
Le specializzazioni di Operazione vengono rappresentate come un attributo che distingue Prelievo e Deposito.
Se viene rimossa una colonnina nella tabella Operazione rimarrà comunque il codice di essa.
trigger se trasporto allora TipologiaTrasporto not null altrimenti IdTessera NOT NULL

MANUTENZIONE
Entità trasporto eliminata perchè diventa inutile rispetto ad avere un attributo in operazione per indicare il trasporto


QUANDO LINKO UN'OPERAZIONE AD UN NOLEGGIO, DEVO AVERE IL BOOL TRASPORTO 0
ATTENZIONE CREARE TRIGGER PER CONTROLLARE L'ELIMINAZIONE DI UNA STAZIONE/COLONNINA/OPERAZIONE SE C'E' UN NOLEGGIO IN CORSO